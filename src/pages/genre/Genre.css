.genre-container {
    min-height: 100vh;
    background: #161D25;
    color: white;
    outline: none;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* prevent scrollbars on container */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
}

.genre-container::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

/* Remove green bottom border under top bar on Genre screen only */
.genre-container .panmetro-topbar {
    border-bottom: none;
}

/* Stick bottom bar to the bottom inside flex column */
.genre-container .panmetro-bottombar {
    margin-top: auto;
    width: 100%;
    border-top: none;
}

.genre-layout {
    display: grid;
    grid-template-columns: 0.4fr 0.5fr 1.1fr; /* genre | channel | preview */
    gap: 12px;
    padding: 12px;
    flex: 1;
    min-height: 0; /* allow children to scroll instead of pushing footer */
    overflow: hidden; /* prevent scrollbars on layout */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
}

.genre-layout::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

.genre-col, .channel-col, .preview-col {
    min-width: 0;
    min-height: 0; /* critical for nested scroll containers */
    display: flex;
    flex-direction: column;
}

.genre-panel { background: #151414; border-radius: 6px; display: flex; flex-direction: column; height: calc(100vh - 250px); max-height: calc(100vh - 250px); }
.arrow-row { height: 40px; padding: 5px; display: flex; align-items: center; justify-content: center; background: #2F2A2A; border-radius: 8px; margin: 6px; }
.arrow-icon { color: #FFFFFF; }
.arrow-icon.muted { color: #9EA3A8; }
.genre-scroll { flex: 1; overflow-y: auto; overflow-x: visible; padding: 12px 28px; scrollbar-width: none; -ms-overflow-style: none; }
.genre-scroll::-webkit-scrollbar { display: none; }

.genre-item {
    display: flex;
    align-items: center;
    width: 100%;
    height: 84px;
    margin: 12px 0;
    border-radius: 6px;
    border: 1px solid transparent; /* focused border when pane active */
    background: #232020;
    color: white;
    font-size: 26px;
    font-weight: 700;
    text-align: left;
    padding: 0 20px;
    transform: scale(1);
    transform-origin: center;
    will-change: transform;
    transition: transform 120ms ease, border-color 0ms linear;
    scroll-margin: 12px 0; /* keep space when scrolled into view */
}
.genre-item.selected { color: #49FEDD; }
.genre-item.focused { 
    border-color: #49FEDD; 
    transform: scale(1.08); 
    position: relative; 
    z-index: 3; 
}

.genre-item.is-all { padding: 0; }
.genre-item-all { display: flex; align-items: center; height: 100%; width: 100%; justify-content: flex-start; }
.genre-item-all .genre-text { flex: 1; background: #2F2A2A; height: 100%; display: flex; align-items: center; border-top-left-radius: 6px; border-bottom-left-radius: 6px; padding-left: 20px; }
.genre-item-all .genre-play { width: 40px; height: 100%; display: flex; align-items: center; justify-content: center; background: #2F2A2A; border-top-right-radius: 6px; border-bottom-right-radius: 6px; margin-left: auto; }

.channel-list {
    background: #151414;
    border-radius: 8px;
    padding: 8px;
    height: calc(100vh - 24px - 24px);
    overflow: auto;
}

.channel-panel { background: #151414; border-radius: 8px; display: flex; flex-direction: column; height: calc(100vh - 250px); max-height: calc(100vh - 250px); }
.channel-scroll { flex: 1; overflow: auto; padding: 2px 6px; scrollbar-width: none; -ms-overflow-style: none; }
.channel-scroll::-webkit-scrollbar { display: none; }

.channel-empty-message {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 10px;
    color: #FFFFFF;
    font-size: 24px;
}

.channel-row {
    display: flex;
    align-items: center;
    gap: 12px;
    height: 84px;
    margin: 12px 0;
    background: #232020;
    border-radius: 6px;
    padding: 8px;
    border: 1px solid transparent;
    overflow: hidden; /* keep children within rounded box */
}
.channel-row.focused { border-color: #49FEDD; }

.channel-thumb {
    width: 100px;
    height: 56px;
    border-radius: 6px;
    overflow: hidden;
    background: #2A3139;
    display: flex;
    align-items: center;
    justify-content: center;
    /* add slight inset so logos never touch the edges on browser zoom changes */
    padding: 12px; /* increased inner padding to avoid clipping on zoom */
    box-sizing: border-box;
}
.channel-thumb img {
    /* prevent any cropping while maintaining aspect */
    width: auto;
    height: auto;
    max-width: calc(100% - 1px);  /* defensive 1px inset to avoid edge clipping on zoom */
    max-height: calc(100% - 1px); /* defensive 1px inset */
    object-fit: contain;
    object-position: center center;
    display: block; /* avoid inline-image baseline offset causing clipping in flex containers */
}
.channel-thumb-placeholder { color: #B5B5B5; font-size: 24px; }

.channel-meta { display: flex; align-items: center; gap: 10px; flex: 1; min-width: 0; }
.channel-num { background: white; color: black; border-radius: 4px; padding: 2px 6px; font-size: 18px; }
.channel-panel .channel-title { 
    font-size: 27px; 
    font-weight: 700;
    text-transform: uppercase;
    color: #FFFFFF;
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    flex: 1; 
    min-width: 0; 
    max-width: 100%; 
    text-align: left; 
    position: relative; 
    isolation: isolate; 
    z-index: 0; 
}

/* When a channel row is focused, tint its title with the base accent color */
.channel-row.focused .channel-title,
.channel-row.focused .channel-title .channel-title-text {
    color: #49FEDD;
}

.channel-title .channel-title-text {
    display: inline-block;
    will-change: transform;
    white-space: nowrap;           /* ensure single-line intrinsic width */
    min-width: max-content;        /* let span expand to full text width for overflow calc */
}

/* Dedicated clipping viewport to guarantee text stays within bounds on TV engines */
.channel-title-viewport {
    position: relative;
    width: 100%;
    overflow: hidden;
    display: block;
}

/* Marquee track wraps two copies for seamless loop */
.channel-title .marquee-track {
    display: inline-flex;
    align-items: center;
    gap: 24px;
    transform: translateX(0);
    position: relative;
}
.channel-title .channel-title-text.clone { display: none; }
.channel-title.is-overflowing .channel-title-text.clone { display: inline; }

/* Enable marquee animation only when row is focused AND JS detects overflow (seamless loop) */
.channel-row.focused .channel-title.is-overflowing .channel-title-viewport .marquee-track {
    padding-left: 24px; /* gap at reset point */
    animation-name: genre-channel-marquee;
    animation-duration: var(--marquee-duration, 8s);
    animation-timing-function: linear;
    animation-iteration-count: var(--marquee-iterations, infinite);
    animation-delay: var(--marquee-delay, 0ms);
    animation-fill-mode: both;
}

@keyframes genre-channel-marquee {
    0%   { transform: translateX(0); }
    100% { transform: translateX(calc(-1 * var(--loop-distance, var(--scroll-distance, 0px)))); }
}

.preview-panel {
    background: #151414;
    border-radius: 8px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex: 1;
    max-height: 100%;
    overflow-y: auto;
    overflow-x: visible; /* allow edge-to-edge banner corners to show */
    height: calc(100vh - 250px);
    max-height: calc(100vh - 250px);
}
.preview-panel { scrollbar-width: none; -ms-overflow-style: none; }
.preview-panel::-webkit-scrollbar { display: none; }
.preview-banner { width: 100%; aspect-ratio: 16/9; background: #232020; border-radius: 6px; overflow: hidden; position: relative; }
.preview-banner img { width: 100%; height: 100%; object-fit: contain; }
.preview-brand { position: absolute; left: 0; right: 0; bottom: 0; padding: 8px 10px; background: rgba(0,0,0,0.35); display: flex; align-items: center; justify-content: flex-start; }
.preview-brand img { height: 44px; width: auto; object-fit: contain; }
/* below-player brand card (like screenshot) */
.preview-brand-below {
    width: 100%;
    background: #ffffff;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px;
    margin-top: 18px;
    margin-left: 0;
    margin-right: 0;
    box-sizing: border-box;
    min-height: 120px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
}
.preview-brand-below img {
    width: 100%;
    max-width: 520px;
    max-height: 100px;
    height: auto;
    object-fit: contain;
}
.preview-info { display: flex; flex-direction: column; gap: 6px; }
.preview-title { font-size: 24px; font-weight: 600; }
.preview-sub { font-size: 16px; color: #B5B5B5; }


